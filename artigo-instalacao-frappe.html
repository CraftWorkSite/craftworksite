<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Definitivo: Instalando o Frappe Framework no Windows com WSL</title>
    <style>
        /* --- Estilo Base e Tipografia --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            line-height: 1.7;
            color: #333;
            background-color: #fdfdfd;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px 40px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        h1, h2, h3 {
            color: #111;
            line-height: 1.3;
            margin-top: 1.5em;
            margin-bottom: 0.8em;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        
        h1 { font-size: 2.2em; }
        h2 { font-size: 1.8em; }
        h3 { font-size: 1.4em; border-bottom: none; }

        p { margin-bottom: 1.2em; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* --- Estilo para Blocos de Código --- */
        pre {
            background-color: #2d2d2d; /* Fundo escuro */
            color: #f1f1f1; /* Texto claro */
            padding: 18px;
            border-radius: 6px;
            overflow-x: auto; /* Adiciona scroll horizontal se o código for muito longo */
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            font-size: 0.95em;
        }

        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            background-color: #e8e8e8;
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        pre > code {
            background-color: transparent;
            padding: 0;
            font-size: 1em;
        }

        /* --- Outros Elementos --- */
        ul, ol { padding-left: 20px; }
        li { margin-bottom: 0.8em; }
        strong { color: #111; }
        
        blockquote {
            border-left: 4px solid #007bff;
            padding: 10px 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
        }
        blockquote p {
            font-style: italic;
        }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Guia Definitivo: Instalando o Frappe Framework no Windows com WSL</h1>
            <p><strong>Publicado em:</strong> 04 de Novembro de 2025</p>
        </header>

        <article>
            <p>Este guia detalha o processo completo para instalar um ambiente de desenvolvimento robusto para o <strong>Frappe Framework</strong> no Windows 10 ou 11, utilizando o Subsistema Windows para Linux (WSL) com Ubuntu 22.04. O foco é exclusivamente na instalação do framework base, preparando o terreno para a criação de aplicativos customizados ou a futura instalação de apps como o ERPNext.</p>

            <h2>Pré-requisitos</h2>
            <ul>
                <li>Windows 10 ou 11.</li>
                <li>Conexão com a internet.</li>
                <li>Terminal com privilégios de Administrador (PowerShell ou Prompt de Comando).</li>
            </ul>

            <h2>Passo 1: Habilitando o WSL e Instalando o Ubuntu 22.04</h2>
            <p>Se você ainda não possui o WSL configurado, este é o ponto de partida.</p>
            <ol>
                <li>Abra o <strong>PowerShell</strong> ou <strong>Prompt de Comando</strong> como Administrador.</li>
                <li>Execute o comando para instalar o WSL e a distribuição Ubuntu 22.04:</li>
            </ol>
            <pre><code>wsl --install -d Ubuntu-22.04</code></pre>
            <ol start="3">
                <li><strong>Reinicie o computador</strong> quando solicitado. Após a reinicialização, o terminal do Ubuntu será aberto para que você crie seu usuário e senha padrão do Linux.</li>
            </ol>

            <h2>Passo 2: Criando um Usuário Dedicado 'frappe' (Etapa Crucial)</h2>
            <p>Para evitar 99% dos problemas de permissão, nunca execute os comandos do Frappe como <code>root</code> ou com seu usuário padrão. Vamos criar um usuário dedicado chamado <code>frappe</code>.</p>
            <ol>
                <li>No terminal do Ubuntu, crie o novo usuário:</li>
            </ol>
            <pre><code>sudo adduser frappe</code></pre>
            <ol start="2">
                <li>Adicione este usuário ao grupo <code>sudo</code> para que ele possa executar tarefas administrativas:</li>
            </ol>
            <pre><code>sudo usermod -aG sudo frappe</code></pre>
            <ol start="3">
                <li>Feche o terminal atual e abra um novo. A partir de agora, <strong>sempre</strong> troque para este usuário antes de começar a trabalhar:</li>
            </ol>
            <pre><code>su - frappe</code></pre>
            <blockquote><p><strong>Importante:</strong> O hífen (<code>-</code>) é essencial. Ele simula um login completo, carregando o ambiente e as configurações corretas do usuário <code>frappe</code>.</p></blockquote>

            <h2>Passo 3: Instalando as Dependências do Sistema</h2>
            <p>Agora, como usuário <code>frappe</code>, vamos instalar todos os pacotes de software necessários.</p>
            <h3>1. Atualize a lista de pacotes do Ubuntu:</h3>
            <pre><code>sudo apt update && sudo apt upgrade -y</code></pre>
            <h3>2. Instale os pacotes essenciais:</h3>
            <p>Isso inclui Git, Python, MariaDB, Redis, e outras bibliotecas necessárias.</p>
            <pre><code>sudo apt install -y git python3-dev python3-pip python3-venv mariadb-server redis-server libmariadb-dev pkg-config curl</code></pre>
            <h3>3. Configure e proteja o MariaDB:</h3>
            <p>Este script interativo definirá a senha do superusuário (<code>root</code>) do banco de dados.</p>
            <pre><code>sudo mariadb-secure-installation</code></pre>
            <p>Siga as instruções na tela. É <strong>extremamente importante que você defina e anote a senha do root do MariaDB</strong>, pois ela será necessária em breve.</p>

            <h2>Passo 4: Instalando Node.js e Ferramentas de Frontend</h2>
            <p>O Frappe utiliza Node.js e Yarn. A melhor forma de instalar o Node.js é através do NVM (Node Version Manager).</p>
            <ol>
                <li><strong>Instale o NVM:</strong></li>
            </ol>
            <pre><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash</code></pre>
            <ol start="2">
                <li><strong>Carregue o NVM no seu terminal:</strong> (Feche e reabra o terminal ou execute o comando abaixo)</li>
            </ol>
            <pre><code>source ~/.bashrc</code></pre>
            <ol start="3">
                <li><strong>Instale a versão 18 do Node.js (recomendada):</strong></li>
            </ol>
            <pre><code>nvm install 18</code></pre>
            <ol start="4">
                <li><strong>Instale o Yarn globalmente:</strong></li>
            </ol>
            <pre><code>npm install -g yarn</code></pre>

            <h2>Passo 5: Instalando o Gerador de PDF (wkhtmltopdf)</h2>
            <p>Esta ferramenta é essencial para que o Frappe Framework possa criar documentos em PDF, como relatórios e faturas.</p>
            <ol>
                <li><strong>Instale as dependências gráficas necessárias:</strong></li>
            </ol>
            <pre><code>sudo apt install -y xvfb libfontconfig1</code></pre>
            <ol start="2">
                <li><strong>Baixe o pacote para Ubuntu 22.04 (Jammy):</strong></li>
            </ol>
            <pre><code>wget https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6.1-2/wkhtmltox_0.12.6.1-2.jammy_amd64.deb</code></pre>
            <ol start="3">
                <li><strong>Instale o pacote baixado:</strong></li>
            </ol>
            <pre><code>sudo dpkg -i wkhtmltox_0.12.6.1-2.jammy_amd64.deb</code></pre>
            <blockquote>
                <h3>Dica: E se eu já baixei o arquivo pelo navegador no Windows?</h3>
                <p>Se você baixou o arquivo <code>.deb</code> na sua pasta de Downloads do Windows, pode acessá-lo diretamente pelo terminal do WSL. O seu disco <code>C:</code> está montado em <code>/mnt/c/</code>. O comando para acessar a pasta e instalar será algo assim (substitua <code>&lt;seu-usuario-windows&gt;</code> pelo seu nome de usuário do Windows):</p>
                <pre><code># 1. Navegue até a sua pasta de Downloads do Windows
cd /mnt/c/Users/&lt;seu-usuario-windows&gt;/Downloads

# 2. Instale o pacote a partir desta pasta
sudo dpkg -i wkhtmltox_0.12.6.1-2.jammy_amd64.deb</code></pre>
            </blockquote>
            
            <h2>Passo 6: Instalando o Frappe Bench</h2>
            <p><code>bench</code> é a CLI que você usará para gerenciar todo o seu ambiente Frappe.</p>
            <ol>
                <li><strong>Instale o <code>frappe-bench</code> usando <code>pip</code>:</strong></li>
            </ol>
            <pre><code>pip install frappe-bench</code></pre>
            <ol start="2">
                <li><strong>Verifique se o <code>bench</code> está no seu PATH:</strong></li>
            </ol>
            <p>Execute <code>bench --version</code>. Se o comando não for encontrado, adicione o diretório local de binários ao seu PATH:</p>
            <pre><code>echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc</code></pre>
            
            <h2>Passo 7: Criando seu Ambiente ("Bench") e Primeiro Site</h2>
            <ol>
                <li><strong>Inicialize a "bench":</strong></li>
            </ol>
            <pre><code># Certifique-se de estar no seu diretório home
cd ~
bench init frappe-bench</code></pre>
            <ol start="2">
                <li><strong>Entre no diretório da sua bench:</strong></li>
            </ol>
            <pre><code>cd frappe-bench</code></pre>
            <ol start="3">
                <li><strong>Crie um novo site:</strong> (Substitua <code>meu-site.local</code> pelo nome que desejar)</li>
            </ol>
            <pre><code>bench new-site meu-site.local</code></pre>
            <p>O sistema pedirá a <strong>senha do <code>root</code> do MariaDB</strong> e, em seguida, você criará a senha para o usuário <strong><code>Administrator</code></strong> do seu site Frappe. Anote esta senha!</p>

            <h2>Passo 8: Iniciando o Servidor</h2>
            <p>Com tudo configurado, inicie o servidor de desenvolvimento.</p>
            <pre><code>bench start</code></pre>
            
            <!-- SEÇÃO ADICIONADA -->
            <h2>Passo 9: Dicas de Desenvolvimento - O Ambiente Virtual (env)</h2>
            <p>Excelente ponto! Embora o comando <code>bench</code> gerencie o ambiente virtual para você na maioria das vezes, um desenvolvedor frequentemente precisa "entrar" nesse ambiente para tarefas específicas. A pasta <code>env</code> dentro do seu <code>frappe-bench</code> é um ambiente virtual Python isolado.</p>
            
            <h3>Quando Ativar o Ambiente Manualmente?</h3>
            <ul>
                <li>Para instalar uma biblioteca Python com <code>pip</code> que será usada apenas neste projeto (ex: <code>pip install requests</code>).</li>
                <li>Para usar o console interativo do Frappe com o comando <code>bench --site meu-site.local console</code>.</li>
                <li>Para rodar scripts Python diretamente no contexto do Frappe.</li>
            </ul>

            <h3>Comandos Essenciais</h3>
            <p>Para ativar o ambiente, faça o seguinte:</p>
            <pre><code># 1. Certifique-se de estar na pasta frappe-bench
cd ~/frappe-bench

# 2. Ative o ambiente
source env/bin/activate</code></pre>
            <p>Você saberá que funcionou, pois o seu prompt do terminal mudará, exibindo <strong><code>(env)</code></strong> no início. Por exemplo: <code>(env) frappe@SEU-PC:~/frappe-bench$</code></p>
            <p>Para sair do ambiente e voltar ao terminal normal, simplesmente digite:</p>
            <pre><code>deactivate</code></pre>
            
            <blockquote><p><strong>Lembrete Importante:</strong> Para comandos normais como <code>bench start</code>, <code>bench update</code> ou <code>bench new-site</code>, você <strong>não precisa</strong> ativar o ambiente manualmente. O <code>bench</code> faz isso por você nos bastidores. Esta ativação manual é apenas para as tarefas de desenvolvimento avançadas listadas acima.</p></blockquote>
            
            <hr>
            
            <h2>Conclusão</h2>
            <p><strong>Parabéns!</strong> O seu ambiente de desenvolvimento do Frappe Framework está no ar. Abra seu navegador no Windows e acesse <a href="http://localhost:8000" target="_blank">http://localhost:8000</a>.</p>
            <p>Faça o login com o usuário <code>Administrator</code> e a senha que você acabou de criar. Você concluiu com sucesso a instalação de uma base sólida, pronta para desenvolver ou instalar qualquer aplicativo sobre o Frappe Framework.</p>
        </article>
    </div>

</body>
</html>
